# =====================================================
# Email Sender Service - Environment Configuration
# =====================================================
# IMPORTANT: Copy this file to .env and fill in real values
# Never commit .env file to version control!
# =====================================================

# =====================================================
# Database Configuration (PostgreSQL)
# =====================================================
# PostgreSQL database credentials
# SECURITY: Use strong passwords in production!

POSTGRES_USER=emailsender
POSTGRES_PASSWORD=change_this_to_a_strong_password
POSTGRES_DB=emailsender_db

# Full database connection URL
# Format: postgresql://username:password@host:port/database
# For Docker: host is "db" (service name from docker-compose.yml)
DATABASE_URL=postgresql://emailsender:change_this_to_a_strong_password@db:5432/emailsender_db

# =====================================================
# Backend Configuration (Node.js + Express)
# =====================================================

# Environment mode
# Values: development | production | test
NODE_ENV=production

# Backend server port
PORT=3000

# JWT Authentication
# SECURITY: Generate with: openssl rand -hex 64
# Must be at least 32 characters long
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production_make_it_very_long

# JWT token expiration
# Examples: 60 (60 seconds), 2h (2 hours), 7d (7 days), 30d (30 days)
JWT_EXPIRES_IN=7d

# SMTP Credential Encryption Key
# SECURITY: Must be exactly 64 characters (32 bytes in hex for AES-256)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SMTP_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# =====================================================
# Frontend Configuration
# =====================================================

# Backend API URL (used by frontend)
# For Docker: use backend service name
# For local development: use localhost:3000
BACKEND_URL=http://localhost:3000

# =====================================================
# Optional: Rate Limiting (Future Enhancement)
# =====================================================
# Uncomment if implementing rate limiting

# RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
# RATE_LIMIT_MAX_REQUESTS=100   # Max 100 requests per window

# =====================================================
# Optional: Email Sending Configuration
# =====================================================
# These are per-user settings stored in database
# Documented here for reference only

# Gmail SMTP Settings (configured in UI):
# - Host: smtp.gmail.com
# - Port: 587
# - Secure: false (use STARTTLS)
# - Daily Limit: 500 emails per day (Gmail free tier)
# - Recommended Rate: 1 email per second

# =====================================================
# Development Notes
# =====================================================

# How to generate secure secrets:
# 1. JWT Secret (64 hex characters):
#    openssl rand -hex 64
#
# 2. Encryption Key (32 hex characters for AES-256):
#    openssl rand -hex 32
#
# 3. Strong Password:
#    openssl rand -base64 32

# How to use this file:
# 1. Copy: cp .env.example .env
# 2. Generate secrets using commands above
# 3. Replace all placeholder values
# 4. Never commit .env to Git!

# Docker Compose Usage:
# - docker-compose automatically loads .env file
# - Variables are injected into containers
# - Restart containers after changing .env: docker-compose restart

# =====================================================
# Production Deployment Checklist
# =====================================================
# [ ] Changed POSTGRES_PASSWORD to strong password (32+ chars)
# [ ] Generated new JWT_SECRET (64+ characters)
# [ ] Generated new SMTP_ENCRYPTION_KEY (exactly 64 hex characters)
# [ ] Set NODE_ENV=production
# [ ] Verified DATABASE_URL uses correct credentials
# [ ] Tested all environment variables load correctly
# [ ] Added .env to .gitignore (verify with: git status)
# [ ] Documented secrets in secure password manager
# [ ] Set up backup for encryption key (CRITICAL!)
# [ ] Configured CORS_ORIGIN for production domain (if needed)
